<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Testing | VeeValidate</title>
    <meta name="description" content="Input validation for Vue.js">
    <meta charset="utf-8">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/img/ms-icon-144x144.png">
  <meta name="theme-color" content="#41b883">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:image" content="https://s3.eu-central-1.amazonaws.com/logaretm/vee-validate.svg">
  <link rel="apple-touch-icon" sizes="57x57" href="/vee-validate/img/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/vee-validate/img/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/vee-validate/img/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/vee-validate/img/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/vee-validate/img/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/vee-validate/img/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/vee-validate/img/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/vee-validate/img/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/vee-validate/img/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/vee-validate/img/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/vee-validate/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/vee-validate/img/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/vee-validate/img/favicon-16x16.png">
    
    <link rel="preload" href="/vee-validate/assets/css/0.styles.28c99067.css" as="style"><link rel="preload" href="/vee-validate/assets/js/app.ec7a56fb.js" as="script"><link rel="preload" href="/vee-validate/assets/js/31.f7030153.js" as="script"><link rel="preload" href="/vee-validate/assets/js/23.4c9335fb.js" as="script"><link rel="prefetch" href="/vee-validate/assets/js/15.4aa91a18.js"><link rel="prefetch" href="/vee-validate/assets/js/2.cc1e3b21.js"><link rel="prefetch" href="/vee-validate/assets/js/3.d8c5785d.js"><link rel="prefetch" href="/vee-validate/assets/js/4.21a0ef0b.js"><link rel="prefetch" href="/vee-validate/assets/js/5.d6f1d3be.js"><link rel="prefetch" href="/vee-validate/assets/js/6.65880a5b.js"><link rel="prefetch" href="/vee-validate/assets/js/7.f08858b6.js"><link rel="prefetch" href="/vee-validate/assets/js/8.258acc73.js"><link rel="prefetch" href="/vee-validate/assets/js/9.491f22e0.js"><link rel="prefetch" href="/vee-validate/assets/js/10.6a9f1822.js"><link rel="prefetch" href="/vee-validate/assets/js/11.166d16cc.js"><link rel="prefetch" href="/vee-validate/assets/js/12.16e033fe.js"><link rel="prefetch" href="/vee-validate/assets/js/13.51e72912.js"><link rel="prefetch" href="/vee-validate/assets/js/14.7a11d302.js"><link rel="prefetch" href="/vee-validate/assets/js/16.7f76ca31.js"><link rel="prefetch" href="/vee-validate/assets/js/17.88efc7f1.js"><link rel="prefetch" href="/vee-validate/assets/js/18.a39bfe59.js"><link rel="prefetch" href="/vee-validate/assets/js/19.c7eba924.js"><link rel="prefetch" href="/vee-validate/assets/js/20.a016b72e.js"><link rel="prefetch" href="/vee-validate/assets/js/21.04eb2afb.js"><link rel="prefetch" href="/vee-validate/assets/js/22.2e25fc51.js"><link rel="prefetch" href="/vee-validate/assets/js/24.2caae87a.js"><link rel="prefetch" href="/vee-validate/assets/js/25.180bcc5a.js"><link rel="prefetch" href="/vee-validate/assets/js/26.2af24115.js"><link rel="prefetch" href="/vee-validate/assets/js/27.e39d0e95.js"><link rel="prefetch" href="/vee-validate/assets/js/28.db2c8d5f.js"><link rel="prefetch" href="/vee-validate/assets/js/29.60e2dd82.js"><link rel="prefetch" href="/vee-validate/assets/js/30.bb1f17c0.js">
    <link rel="stylesheet" href="/vee-validate/assets/css/0.styles.28c99067.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vee-validate/" class="home-link router-link-active"><!----> <span class="site-name">VeeValidate</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vee-validate/guide/" class="nav-link router-link-active">Guide</a></div><div class="nav-item"><a href="/vee-validate/configuration.html" class="nav-link">Config</a></div><div class="nav-item"><a href="/vee-validate/api/" class="nav-link">API</a></div><div class="nav-item"><a href="/vee-validate/examples/" class="nav-link">Examples</a></div><div class="nav-item"><a href="http://vee-validate.logaretm.com/v2" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v2.x
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/logaretm/vee-validate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vee-validate/guide/" class="nav-link router-link-active">Guide</a></div><div class="nav-item"><a href="/vee-validate/configuration.html" class="nav-link">Config</a></div><div class="nav-item"><a href="/vee-validate/api/" class="nav-link">API</a></div><div class="nav-item"><a href="/vee-validate/examples/" class="nav-link">Examples</a></div><div class="nav-item"><a href="http://vee-validate.logaretm.com/v2" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v2.x
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/logaretm/vee-validate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vee-validate/guide/" class="sidebar-link">Introduction</a></li><li><a href="/vee-validate/guide/getting-started.html" class="sidebar-link">Getting Started</a></li><li><a href="/vee-validate/guide/basic-validation.html" class="sidebar-link">Validation</a></li><li><a href="/vee-validate/guide/applying-rules.html" class="sidebar-link">Using Validation</a></li><li><a href="/vee-validate/guide/displaying-errors.html" class="sidebar-link">Displaying Errors</a></li><li><a href="/vee-validate/guide/validation-provider.html" class="sidebar-link">Validation Provider</a></li><li><a href="/vee-validate/guide/validation-observer.html" class="sidebar-link">Validation Observer</a></li><li><a href="/vee-validate/guide/interaction-and-ux.html" class="sidebar-link">Interaction and UX</a></li><li><a href="/vee-validate/guide/styling.html" class="sidebar-link">Styling UI</a></li><li><a href="/vee-validate/guide/a11y.html" class="sidebar-link">Accessibility</a></li><li><a href="/vee-validate/guide/html5-validation.html" class="sidebar-link">HTML5 Validation</a></li><li><a href="/vee-validate/guide/advanced-validation.html" class="sidebar-link">Advanced Validation</a></li><li><a href="/vee-validate/guide/localization.html" class="sidebar-link">Localization</a></li><li><a href="/vee-validate/guide/testing.html" class="active sidebar-link">Testing</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vee-validate/guide/testing.html#asynchronous-testing" class="sidebar-link">Asynchronous Testing</a></li><li class="sidebar-sub-header"><a href="/vee-validate/guide/testing.html#test-behavior-not-implementation" class="sidebar-link">Test behavior, not implementation</a></li><li class="sidebar-sub-header"><a href="/vee-validate/guide/testing.html#testing-error-messages" class="sidebar-link">Testing Error Messages</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="testing"><a href="#testing" aria-hidden="true" class="header-anchor">#</a> Testing</h1> <p>Testing is extremely important to give you confidence in your code. VeeValidate isn't special when it comes to testing, but a lot of issues seemed to miss a few important details about testing.</p> <p>In this guide we will talk about testing in general and the best practices of testing frontend validation.</p> <div class="tip custom-block"><p>The following examples will use <code>vue-test-utils</code> API to conduct the tests.</p></div> <h2 id="asynchronous-testing"><a href="#asynchronous-testing" aria-hidden="true" class="header-anchor">#</a> Asynchronous Testing</h2> <p>VeeValidate is primarily asynchronous, so you would need to disable <code>vue-test-utils</code> sync mode. And you will use <code>flush-promises</code> to wait for the updated to take effect.</p> <p>To disable the sync mode, when mounting the component set the <code>sync</code> option to false in the mounting options.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">mount</span><span class="token punctuation">(</span>MyComponent<span class="token punctuation">,</span> <span class="token punctuation">{</span> sync<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>After triggering an event like an <code>input</code> event, make sure to call <code>flushPromises</code> before checking the UI for changes:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> <span class="token function">flushPromises</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="test-behavior-not-implementation"><a href="#test-behavior-not-implementation" aria-hidden="true" class="header-anchor">#</a> Test behavior, not implementation</h2> <p>Generally you want to test how your UI behaves rather than how it does it.</p> <blockquote><p>“I don’t care how you come up with the answer, just make sure that the answer is correct under this set of circumstances”</p></blockquote> <p>Consider this test for example, we have this component:</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ValidationProvider</span> <span class="token attr-name">rules</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>required<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{ errors }<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>provider<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>value<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>error<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ errors[0] }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ValidationProvider</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>A test case could look like this:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">mount</span><span class="token punctuation">(</span>MyComponent<span class="token punctuation">,</span> <span class="token punctuation">{</span> sync<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

wrapper<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// flush the pending validation.</span>
<span class="token keyword">await</span> <span class="token function">flushPromises</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Get the error message from the ref</span>
<span class="token keyword">const</span> error <span class="token operator">=</span> wrapper<span class="token punctuation">.</span>vm<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>provider<span class="token punctuation">.</span>messages<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">expect</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>While this test would work fine, it could fail easily, since <code>messages</code> is internal property and may change at anytime without notice and also if you decided to swap vee-validate for something else it will immediately break, you want to test your UI the way the user would use it.</p> <p>So instead of checking the internal messages, let's describe what the user will actually experience via a short story and simulate that.</p> <blockquote><p>&quot;The user should <strong>see an error</strong> when they input an empty value&quot;</p></blockquote> <p>We could test that like this,</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">mount</span><span class="token punctuation">(</span>MyComponent<span class="token punctuation">,</span> <span class="token punctuation">{</span> sync<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

wrapper<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// flush the pending validation.</span>
<span class="token keyword">await</span> <span class="token function">flushPromises</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Check if the element has text inside it.</span>
<span class="token keyword">const</span> errorEl <span class="token operator">=</span> wrapper<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">expect</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This test is much more robust than the previous one, if you were to change the validation your tests would still work. Because we are not testing implementation details, we care if the validation is done, we don't care how it is being done.</p> <h2 id="testing-error-messages"><a href="#testing-error-messages" aria-hidden="true" class="header-anchor">#</a> Testing Error Messages</h2> <p>Following upon the previous idea, testing specific error messages is also very flaky. Assume you have a language for which your messages may change at any time, for example they are generated by a backend service, or they can be improved as you iterate through your app. You want to keep improving those messages grammar-wise or style wise.</p> <p>For example you have this in your tests:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">'The name field is required'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The problem with this, is that you may change the style to <code>This field is required</code>. Or even change the field name for something less ambiguous like <code>full name</code>. Ask your self this: <strong>do you really care if that specific message is displayed? or are you are only interested in having a message appear to your user?</strong></p> <p>Depending on your answer, you might change how the test is conducted.</p> <p>If you want to check if any message is going to be displayed, any of these would do:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Any message</span>
<span class="token function">expect</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// we only care if the message has `required`.</span>
<span class="token function">expect</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toContain</span><span class="token punctuation">(</span><span class="token string">'required'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/logaretm/vee-validate/edit/master/docs/guide/testing.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/vee-validate/guide/localization.html" class="prev">
          Localization
        </a></span> <!----></p></div> </main></div><div class="global-ui"><SWUpdatePopup></SWUpdatePopup></div></div>
    <script src="/vee-validate/assets/js/31.f7030153.js" defer></script><script src="/vee-validate/assets/js/23.4c9335fb.js" defer></script><script src="/vee-validate/assets/js/app.ec7a56fb.js" defer></script>
  </body>
</html>
